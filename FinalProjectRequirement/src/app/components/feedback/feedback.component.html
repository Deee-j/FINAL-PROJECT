<!-- Modal -->
<div 
  *ngIf="isModalOpen" 
  style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 1000; text-align: center;"
>
  <h3 style="margin: 0 0 10px;">Thank You, {{ name }}!</h3>
  <p>Your feedback has been submitted successfully.</p>
  <button 
    (click)="closeModal()" 
    style="margin-top: 15px; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
    Close
  </button>
</div>

<!-- Feedback Form Centered -->
<div style="display: flex; justify-content: center; margin-bottom: 60px;">
  <div class="feedback-card" style="width: 500px; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <div class="card-header">
      <h3>Feedback Form</h3>
      <p>We value your feedback. Please share your thoughts with us!</p>
    </div>

    <div class="form-container">
      <!-- Error Message -->
      <div *ngIf="errorMessage" style="color: red; margin-bottom: 15px; text-align: center;">
        {{ errorMessage }}
      </div>

      <form (submit)="submitFeedback(); $event.preventDefault();">
        <!-- Name -->
        <div class="form-group" style="margin-bottom: 15px;">
          <label for="name">Name:</label>
          <input 
            type="text" 
            id="name" 
            [(ngModel)]="name" 
            name="name" 
            placeholder="Enter your name"
            required
            style="width: 100%; padding: 8px; margin-top: 5px;"
          />

        <div *ngIf="name" style="margin-top: 10px; color: #555;">
          Your Name: <strong>{{ name }}</strong>
        </div>
      </div>
        <!-- Email -->
        <div class="form-group" style="margin-bottom: 15px;">
          <label for="email">Email:</label>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="email" 
            name="email" 
            placeholder="Enter your email"
            required
            style="width: 100%; padding: 8px; margin-top: 5px;"
          />
        </div>
        <div *ngIf="email" style="margin-top: 10px; color: #555;">
          Your Email: <strong>{{ email }}</strong>
        </div>

        <!-- Message -->
        <div class="form-group" style="margin-bottom: 15px;">
          <label for="message">Message:</label>
          <textarea 
            id="message" 
            [(ngModel)]="message" 
            name="message" 
            rows="4" 
            placeholder="Share your feedback"
            required
            style="width: 100%; padding: 8px; margin-top: 5px;"
          ></textarea>
        </div>

        <!-- Emoji Selector -->
        <div class="form-group" style="margin-bottom: 20px; text-align: center;">
          <label style="display: block; margin-bottom: 8px;">How do you feel?</label>
          <div style="display: flex; justify-content: center; gap: 20px; font-size: 32px;">
            <span 
              (click)="selectEmoji('😊')" 
              [style.opacity]="selectedEmoji === '😊' ? '1' : '0.5'" 
              style="cursor: pointer;">
              😊
            </span>
            <span 
              (click)="selectEmoji('😐')" 
              [style.opacity]="selectedEmoji === '😐' ? '1' : '0.5'" 
              style="cursor: pointer;">
              😐
            </span>
            <span 
              (click)="selectEmoji('😞')" 
              [style.opacity]="selectedEmoji === '😞' ? '1' : '0.5'" 
              style="cursor: pointer;">
              😞
            </span>
          </div>
          <div *ngIf="selectedEmoji" style="margin-top: 10px; font-size: 18px;">
            Selected: {{ selectedEmoji }}
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions" style="display: flex; justify-content: space-between;">
          <!-- Reset -->
          <button 
            type="button" 
            (click)="resetForm()" 
            style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Reset
          </button>

          <!-- Submit -->
          <button 
            type="submit" 
            style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Submitted Feedback -->
<div *ngIf="feedbackRecords.length > 0" style="margin-top: 30px;">
  <h3>Feedback Records:</h3>
  <div 
    *ngFor="let record of feedbackRecords" 
    style="margin-bottom: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9; padding: 10px;">
    <p><strong>Name:</strong> {{ record.name }}</p>
    <p><strong>Email:</strong> {{ record.email }}</p>
    <p><strong>Message:</strong> {{ record.message }}</p>
    <p><strong>Feeling:</strong> {{ record.feeling }}</p>
    <p><strong>Submitted at:</strong> {{ record.dateTime }}</p>
  </div>
</div>
